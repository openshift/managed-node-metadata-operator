# THIS FILE IS GENERATED BY BOILERPLATE. DO NOT EDIT.
apiVersion: template.openshift.io/v1
kind: Template
metadata:
  name: osde2e-focused-tests
labels:
  template: osde2e-focused-tests
parameters:
  - name: HARNESS_IMAGE_TAG
    displayName: Test harness image Tag
  - name: OSDE2E_CONFIGS
    displayName: osde2e Configs
    description: pre-baked configuration from the osde2e repository
    value: rosa,stage,test-harness
  - name: EXTRA_ARGS
    displayName: Additonal args to supply to osde2e
  - name: TEST_HARNESS_IMAGE
    displayName: Test Harness Image(s)
    required: true
objects:
  - apiVersion: batch/v1
    kind: Job
    metadata:
      generateName: osde2e-focused-tests-
    spec:
      backoffLimit: 0
      template:
        spec:
          restartPolicy: Never
          containers:
            - name: osde2e
              image: quay.io/app-sre:latest
              command:
                - /osde2e
              args:
                - test
                - --configs
                - ${OSDE2E_CONFIGS}
                - ${EXTRA_ARGS}
              securityContext:
                runAsNonRoot: true
                allowPrivilegeEscalation: false
                capabilities:
                  drop: ["ALL"]
                seccompProfile:
                  type: RuntimeDefault
              env:
                - name: TEST_HARNESSES
                  value: ${TEST_HARNESS_IMAGE}:${HARNESS_IMAGE_TAG}
                - name: OCM_TOKEN
                  value: ${OCM_TOKEN}
                - name: AWS_ACCESS_KEY_ID
                  value: ${AWS_ACCESS_KEY_ID}
                - name: AWS_SECRET_ACCESS_KEY
                  value: ${AWS_SECRET_ACCESS_KEY}
                - name: AWS_REGION
                  value: ${AWS_REGION}